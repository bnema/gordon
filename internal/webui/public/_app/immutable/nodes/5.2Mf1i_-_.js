import{c as w,a as e,t as S,b as u}from"../chunks/hjxannYT.js";import{p as bt,f as v,n as Mt,a as yt,u as Yt,m as T,o as ot,$ as Zt,c as b,q as c,s as o,g as t,r as y,t as N,d as te}from"../chunks/IamVTuIH.js";import{h as ee,s as R}from"../chunks/B6lgKlq1.js";import{i as B}from"../chunks/DoUQLM7o.js";import{e as re,i as ae}from"../chunks/BLdnMwNo.js";import{I as Ot,C as se,a as oe,b as le,d as ne,B as V,e as _t,f as ht}from"../chunks/DUcqXfJm.js";import{r as gt,c as Pt}from"../chunks/CwDGzTCp.js";import{s as Rt,r as Bt,a as qt}from"../chunks/Da9Jrtra.js";import{T as ie,a as de,b as xt,c as D,d as ue,e as z,P as ce,f as fe}from"../chunks/CjRQjzW2.js";import"../chunks/5dTWOFJr.js";import{L as lt}from"../chunks/BVT8JEPz.js";import{s as Dt}from"../chunks/9RL9MBmM.js";function $e(E,f){bt(f,!0);let m=Bt(f,["$$slots","$$events","$$legacy"]);Ot(E,Rt({name:"pencil"},()=>m,{iconNode:[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"}],["path",{d:"m15 5 4 4"}]],children:(g,j)=>{var _=w(),I=v(_);Dt(I,()=>f.children??Mt),e(g,_)},$$slots:{default:!0}})),yt()}function ve(E,f){bt(f,!0);let m=Bt(f,["$$slots","$$events","$$legacy"]);Ot(E,Rt({name:"square"},()=>m,{iconNode:[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}]],children:(g,j)=>{var _=w(),I=v(_);Dt(I,()=>f.children??Mt),e(g,_)},$$slots:{default:!0}})),yt()}var pe=S('<div class="flex justify-center items-center h-40"><!></div>'),me=S('<div class="bg-destructive/10 text-destructive p-4 rounded-md"><p> </p> <!></div>'),_e=S("<!> <!> <!> <!> <!> <!>",1),he=S('<div class="flex justify-end gap-2"><form method="POST" action="?/start"><input type="hidden" name="id"> <!></form> <!> <form method="POST" action="?/stop"><input type="hidden" name="id"> <!></form> <form method="POST" action="?/delete"><input type="hidden" name="id"> <!></form></div>'),ge=S("<!> <!> <!> <!> <!> <!>",1),Pe=S("<!> <!>",1),xe=S("<!> <!>",1),be=S('<div class="container mx-auto p-4"><!></div>');function Oe(E,f){bt(f,!0);let m=qt([]),A=ot(null);Yt(()=>{m.length=0,f.data.containers&&m.push(...f.data.containers),T(A,qt(f.data.error||null)),console.debug("Containers data updated:",m.length)});let g=ot(!1),j=ot(!1),_=ot(!1);function I(P){return confirm("Are you sure you want to start this container?")?(T(g,!0),console.debug("Starting container:",P),!0):!1}function Et(P){return confirm("Are you sure you want to stop this container?")?(T(j,!0),console.debug("Stopping container:",P),!0):!1}function It(P){return confirm("Are you sure you want to delete this container?")?(T(_,!0),console.debug("Deleting container:",P),!0):!1}function nt(){T(g,!1),T(j,!1),T(_,!1),console.debug("Reset loading states")}var it=be();ee(P=>{Zt.title="Container Management | Gordon Admin"});var Gt=b(it);se(Gt,{children:(P,ye)=>{var wt=xe(),St=v(wt);oe(St,{children:(dt,Ft)=>{le(dt,{children:(W,Ct)=>{c();var ut=u("Container Management");e(W,ut)},$$slots:{default:!0}})},$$slots:{default:!0}});var Ut=o(St,2);ne(Ut,{children:(dt,Ft)=>{var W=w(),Ct=v(W);{var ut=L=>{var G=pe(),ct=b(G);lt(ct,{class:"h-8 w-8 animate-spin text-primary"}),y(G),e(L,G)},Ht=(L,G)=>{{var ct=k=>{var U=me(),X=b(U),Y=b(X,!0);y(X);var Z=o(X,2);V(Z,{variant:"outline",class:"mt-2",onclick:()=>window.location.reload(),children:(ft,tt)=>{c();var $t=u("Retry");e(ft,$t)},$$slots:{default:!0}}),y(U),N(()=>R(Y,t(A))),e(k,U)},Jt=k=>{ie(k,{children:(U,X)=>{var Y=Pe(),Z=v(Y);de(Z,{children:(tt,$t)=>{xt(tt,{children:(et,Tt)=>{var rt=_e(),at=v(rt);D(at,{children:(i,M)=>{c();var d=u("Name");e(i,d)},$$slots:{default:!0}});var h=o(at,2);D(h,{children:(i,M)=>{c();var d=u("Ports");e(i,d)},$$slots:{default:!0}});var C=o(h,2);D(C,{children:(i,M)=>{c();var d=u("Entry Point");e(i,d)},$$slots:{default:!0}});var F=o(C,2);D(F,{children:(i,M)=>{c();var d=u("Status");e(i,d)},$$slots:{default:!0}});var q=o(F,2);D(q,{children:(i,M)=>{c();var d=u("State");e(i,d)},$$slots:{default:!0}});var r=o(q,2);D(r,{class:"text-right",children:(i,M)=>{c();var d=u("Actions");e(i,d)},$$slots:{default:!0}}),e(et,rt)},$$slots:{default:!0}})},$$slots:{default:!0}});var ft=o(Z,2);ue(ft,{children:(tt,$t)=>{var et=w(),Tt=v(et);{var rt=h=>{xt(h,{children:(C,F)=>{z(C,{colspan:6,class:"text-center py-8 text-muted-foreground",children:(q,r)=>{c();var i=u("No containers found");e(q,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},at=h=>{var C=w(),F=v(C);re(F,17,()=>m,ae,(q,r)=>{xt(q,{get id(){return`container-${t(r).id??""}`},class:"hover:bg-muted/50",children:(i,M)=>{var d=ge(),Nt=v(d);z(Nt,{class:"font-medium",get title(){return t(r).id},children:(p,H)=>{c();var l=u();N(()=>R(l,t(r).name)),e(p,l)},$$slots:{default:!0}});var zt=o(Nt,2);z(zt,{children:(p,H)=>{c();var l=u();N(x=>R(l,x),[()=>!t(r).ports||t(r).ports.length===0?"":typeof t(r).ports[0]=="string"?t(r).ports.join(", "):t(r).ports.map(x=>{const O=x;return`${O.PublicPort}:${O.PrivatePort}`}).join(", ")]),e(p,l)},$$slots:{default:!0}});var At=o(zt,2);z(At,{children:(p,H)=>{c();var l=u();N(()=>R(l,t(r).proxyPort||"")),e(p,l)},$$slots:{default:!0}});var jt=o(At,2);z(jt,{children:(p,H)=>{c();var l=u();N(()=>R(l,`${t(r).status??""} (Up since ${t(r).createdStr??""})`)),e(p,l)},$$slots:{default:!0}});var Lt=o(jt,2);const Kt=te(()=>t(r).state==="running"?"green":"red");z(Lt,{get style(){return`color: ${t(Kt)??""};`},children:(p,H)=>{c();var l=u();N(()=>R(l,t(r).state)),e(p,l)},$$slots:{default:!0}});var Qt=o(Lt,2);z(Qt,{class:"text-right",children:(p,H)=>{var l=he(),x=b(l),O=b(x);gt(O);var Vt=o(O,2);V(Vt,{variant:"ghost",size:"icon",title:"Start the container",type:"submit",get disabled(){return t(g)},children:(s,$)=>{var n=w(),J=v(n);{var K=a=>{lt(a,{class:"h-4 w-4 animate-spin text-blue-600"})},Q=a=>{ce(a,{class:"h-4 w-4 text-blue-600"})};B(J,a=>{t(g)?a(K):a(Q,!1)})}e(s,n)},$$slots:{default:!0}}),y(x),_t(x,(s,$)=>{var n;return(n=ht)==null?void 0:n(s,$)},()=>()=>(I(t(r).id),({update:s,result:$})=>{nt(),s()}));var kt=o(x,2);V(kt,{variant:"ghost",size:"icon",title:"Edit the container",onclick:()=>window.location.href=`/admin/containers/${t(r).id}/edit`,children:(s,$)=>{$e(s,{class:"h-4 w-4 text-blue-600"})},$$slots:{default:!0}});var st=o(kt,2),vt=b(st);gt(vt);var Wt=o(vt,2);V(Wt,{variant:"ghost",size:"icon",title:"Stop the container",type:"submit",get disabled(){return t(j)},children:(s,$)=>{var n=w(),J=v(n);{var K=a=>{lt(a,{class:"h-4 w-4 animate-spin text-red-600"})},Q=a=>{ve(a,{class:"h-4 w-4 text-red-600"})};B(J,a=>{t(j)?a(K):a(Q,!1)})}e(s,n)},$$slots:{default:!0}}),y(st),_t(st,(s,$)=>{var n;return(n=ht)==null?void 0:n(s,$)},()=>()=>(Et(t(r).id),({update:s,result:$})=>{nt(),s()}));var pt=o(st,2),mt=b(pt);gt(mt);var Xt=o(mt,2);V(Xt,{variant:"ghost",size:"icon",title:"Remove the container",type:"submit",get disabled(){return t(_)},children:(s,$)=>{var n=w(),J=v(n);{var K=a=>{lt(a,{class:"h-4 w-4 animate-spin text-red-600"})},Q=a=>{fe(a,{class:"h-4 w-4 text-red-600"})};B(J,a=>{t(_)?a(K):a(Q,!1)})}e(s,n)},$$slots:{default:!0}}),y(pt),_t(pt,(s,$)=>{var n;return(n=ht)==null?void 0:n(s,$)},()=>()=>(It(t(r).id),({update:s,result:$})=>{nt(),s()})),y(l),N(()=>{Pt(O,t(r).id),Pt(vt,t(r).id),Pt(mt,t(r).id)}),e(p,l)},$$slots:{default:!0}}),e(i,d)},$$slots:{default:!0}})}),e(h,C)};B(Tt,h=>{m.length===0?h(rt):h(at,!1)})}e(tt,et)},$$slots:{default:!0}}),e(U,Y)},$$slots:{default:!0}})};B(L,k=>{t(A)?k(ct):k(Jt,!1)},G)}};B(Ct,L=>{!m.length&&!t(A)?L(ut):L(Ht,!1)})}e(dt,W)},$$slots:{default:!0}}),e(P,wt)},$$slots:{default:!0}}),y(it),e(E,it),yt()}export{Oe as component};
