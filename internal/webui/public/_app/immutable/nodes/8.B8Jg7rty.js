import{t as n,a as t,b as d,c as nt}from"../chunks/hjxannYT.js";import{p as bt,t as w,a as yt,c as _,n as Ut,r as m,u as zt,$ as St,f as v,s,m as M,o as dt,q as a,g as c}from"../chunks/IamVTuIH.js";import{h as At,s as j}from"../chunks/B6lgKlq1.js";import{i as it}from"../chunks/DoUQLM7o.js";import{e as Mt,i as jt}from"../chunks/BLdnMwNo.js";import{c as Bt,C as Nt,a as qt,b as Gt,B as V,d as Ot,e as Rt,f as Et}from"../chunks/DUcqXfJm.js";import{b as Ft,r as Ht,c as Jt}from"../chunks/CwDGzTCp.js";import{p as Kt,b as Lt,r as Qt,a as xt}from"../chunks/Da9Jrtra.js";import{o as Vt,a as Wt}from"../chunks/CikHeA0H.js";import{s as Xt}from"../chunks/9RL9MBmM.js";import{T as Yt,a as Zt,b as vt,c as B,d as te,e as I,P as ee,f as ae}from"../chunks/CjRQjzW2.js";import{g as Pt}from"../chunks/5dTWOFJr.js";import{U as re}from"../chunks/C6Oi-tYD.js";var se=n("<p><!></p>");function oe(W,o){bt(o,!0);let p=Kt(o,"ref",15,null),T=Qt(o,["$$slots","$$events","$$legacy","ref","class","children"]);var h=se();let N;var X=_(h);Xt(X,()=>o.children??Ut),m(h),Lt(h,k=>p(k),()=>p()),w(k=>N=Ft(h,N,{class:k,...T}),[()=>Bt("text-muted-foreground text-sm",o.class)]),t(W,h),yt()}var le=n("<!> Upload Image",1),ne=n('<div class="flex items-center justify-between"><div><!> <!></div> <!></div>'),de=n('<div class="bg-destructive/10 text-destructive p-4 rounded-md"><p> </p> <!></div>'),ie=n("<!> <!> <!> <!> <!>",1),ve=n('<p class="text-muted-foreground">No container images found.</p> <p class="text-sm text-muted-foreground mt-2">Upload an image to get started.</p>',1),ce=n('<!> <span class="sr-only">Deploy</span>',1),ue=n('<!> <span class="sr-only">Delete</span>',1),fe=n('<div class="flex justify-end space-x-2"><!> <form method="POST" action="?/delete"><input type="hidden" name="imageId"> <!></form></div>'),$e=n("<!> <!> <!> <!> <!>",1),_e=n("<!> <!>",1),me=n("<!> <!>",1),pe=n('<div class="container mx-auto p-4"><!></div>');function ze(W,o){bt(o,!0);let p=dt(null),T=dt(null),h=dt(!1);zt(()=>{var g,Z;((g=o.form)==null?void 0:g.success)===!1?M(p,xt(o.form.message)):((Z=o.form)==null?void 0:Z.success)===!0&&(M(p,null),window.location.reload())});function N(){M(T,xt(window.setInterval(()=>{M(h,!0),window.location.reload()},3e4)))}function X(){c(T)&&(clearInterval(c(T)),M(T,null))}function k(){Pt("/admin/images/upload")}function wt(g){Pt(`/admin/containers/create/${g}`)}Vt(()=>{N()}),Wt(()=>{X()});var Y=pe();At(g=>{St.title="Container Images | Gordon Admin"});var Tt=_(Y);Nt(Tt,{children:(g,Z)=>{var ct=me(),ut=v(ct);qt(ut,{children:(tt,It)=>{var C=ne(),D=_(C),q=_(D);Gt(q,{children:(x,G)=>{a();var l=d("Image Management");t(x,l)},$$slots:{default:!0}});var U=s(q,2);oe(U,{children:(x,G)=>{a();var l=d("Manage your container images");t(x,l)},$$slots:{default:!0}}),m(D);var et=s(D,2);V(et,{onclick:()=>k(),children:(x,G)=>{var l=le(),P=v(l);re(P,{class:"mr-2 h-4 w-4"}),a(),t(x,l)},$$slots:{default:!0}}),m(C),t(tt,C)},$$slots:{default:!0}});var Ct=s(ut,2);Ot(Ct,{children:(tt,It)=>{var C=nt(),D=v(C);{var q=(U,et)=>{{var x=l=>{var P=de(),O=_(P),R=_(O,!0);m(O);var E=s(O,2);V(E,{variant:"outline",class:"mt-2",onclick:()=>window.location.reload(),children:(at,F)=>{a();var rt=d("Retry");t(at,rt)},$$slots:{default:!0}}),m(P),w(()=>j(R,c(p))),t(l,P)},G=l=>{Yt(l,{children:(P,O)=>{var R=_e(),E=v(R);Zt(E,{children:(F,rt)=>{vt(F,{children:(H,ft)=>{var J=ie(),K=v(J);B(K,{children:(e,$)=>{a();var i=d("Name");t(e,i)},$$slots:{default:!0}});var u=s(K,2);B(u,{children:(e,$)=>{a();var i=d("ID");t(e,i)},$$slots:{default:!0}});var b=s(u,2);B(b,{children:(e,$)=>{a();var i=d("Size");t(e,i)},$$slots:{default:!0}});var z=s(b,2);B(z,{children:(e,$)=>{a();var i=d("Created");t(e,i)},$$slots:{default:!0}});var S=s(z,2);B(S,{class:"text-right",children:(e,$)=>{a();var i=d("Actions");t(e,i)},$$slots:{default:!0}}),t(H,J)},$$slots:{default:!0}})},$$slots:{default:!0}});var at=s(E,2);te(at,{children:(F,rt)=>{var H=nt(),ft=v(H);{var J=u=>{vt(u,{children:(b,z)=>{I(b,{colspan:5,class:"text-center py-4",children:(S,e)=>{var $=ve();a(2),t(S,$)},$$slots:{default:!0}})},$$slots:{default:!0}})},K=u=>{var b=nt(),z=v(b);Mt(z,17,()=>o.data.images,jt,(S,e)=>{vt(S,{children:($,i)=>{var $t=$e(),_t=v($t);I(_t,{children:(f,L)=>{a();var r=d();w(()=>j(r,c(e).name||"<none>")),t(f,r)},$$slots:{default:!0}});var mt=s(_t,2);I(mt,{children:(f,L)=>{a();var r=d();w(()=>j(r,c(e).shortId)),t(f,r)},$$slots:{default:!0}});var pt=s(mt,2);I(pt,{children:(f,L)=>{a();var r=d();w(()=>j(r,c(e).sizeStr)),t(f,r)},$$slots:{default:!0}});var ht=s(pt,2);I(ht,{children:(f,L)=>{a();var r=d();w(()=>j(r,c(e).createdStr)),t(f,r)},$$slots:{default:!0}});var kt=s(ht,2);I(kt,{class:"text-right",children:(f,L)=>{var r=fe(),gt=_(r);V(gt,{variant:"outline",size:"sm",onclick:()=>wt(c(e).id),children:(y,Q)=>{var A=ce(),lt=v(A);ee(lt,{class:"h-4 w-4"}),a(2),t(y,A)},$$slots:{default:!0}});var st=s(gt,2),ot=_(st);Ht(ot);var Dt=s(ot,2);V(Dt,{variant:"destructive",size:"sm",type:"submit",onclick:y=>{confirm("Are you sure you want to delete this container image?")||y.preventDefault()},children:(y,Q)=>{var A=ue(),lt=v(A);ae(lt,{class:"h-4 w-4"}),a(2),t(y,A)},$$slots:{default:!0}}),m(st),Rt(st,y=>{var Q;return(Q=Et)==null?void 0:Q(y)}),m(r),w(()=>Jt(ot,c(e).id)),t(f,r)},$$slots:{default:!0}}),t($,$t)},$$slots:{default:!0}})}),t(u,b)};it(ft,u=>{!o.data.images||o.data.images.length===0?u(J):u(K,!1)})}t(F,H)},$$slots:{default:!0}}),t(P,R)},$$slots:{default:!0}})};it(U,l=>{c(p)?l(x):l(G,!1)},et)}};it(D,U=>{U(q,!1)})}t(tt,C)},$$slots:{default:!0}}),t(g,ct)},$$slots:{default:!0}}),m(Y),t(W,Y),yt()}export{ze as component};
