import{t as m,a as t,b as T,c as ue}from"../chunks/hjxannYT.js";import{p as pe,u as _e,a as ge,$ as $e,f as x,c as d,s as c,g as l,t as G,m as a,o as I,q as v,r as n,d as he}from"../chunks/IamVTuIH.js";import{h as xe,e as R,s as V}from"../chunks/B6lgKlq1.js";import{i as k}from"../chunks/DoUQLM7o.js";import{C as be,a as ye,b as Pe,B as W,d as Ce,e as De,f as we}from"../chunks/DUcqXfJm.js";import{a as Ae}from"../chunks/CwDGzTCp.js";import{a as E}from"../chunks/Da9Jrtra.js";import{g as X}from"../chunks/5dTWOFJr.js";import{L as Ie,I as Ue,A as Y,a as Z}from"../chunks/DwFjzHv4.js";import{A as Le}from"../chunks/CBzDyg1V.js";import{U as ee}from"../chunks/C6Oi-tYD.js";import{L as Te}from"../chunks/BVT8JEPz.js";var ke=m("<!> Back to Images",1),je=m('<div class="flex items-center justify-between"><!> <!></div>'),Be=m('<p class="mt-2 text-sm font-medium"> </p>'),ze=m("<!> Uploading...",1),Oe=m("<!> Upload Image",1),Se=m('<!> <!> <form method="POST" action="?/upload" enctype="multipart/form-data"><div class="space-y-4"><div role="button" aria-label="Drop zone for file upload" tabindex="0"><div class="flex flex-col items-center justify-center gap-2"><!> <h3 class="text-lg font-semibold">Drag & Drop your file here</h3> <p class="text-sm text-muted-foreground">or click to browse</p> <div class="mt-4"><!> <!></div> <!></div></div></div> <div class="flex justify-end mt-4"><!></div></form>',1),qe=m("<!> <!>",1),Fe=m('<div class="container mx-auto p-4"><!></div>');function Ye(ae,U){pe(U,!0);let b=I(null),u=I(!1),y=I(null),L=I(!1),P=I(!1);_e(()=>{var r,i;((r=U.form)==null?void 0:r.success)===!1?(a(y,E(U.form.message)),a(L,!1),a(u,!1)):((i=U.form)==null?void 0:i.success)===!0&&(a(y,null),a(L,!0),a(u,!1),setTimeout(()=>{X("/admin/images")},2e3))});function re(r){const i=r.target;i.files&&i.files.length>0&&a(b,E(i.files[0]))}function te(r){r.preventDefault(),a(P,!0)}function se(){a(P,!1)}function oe(r){var i;r.preventDefault(),a(P,!1),(i=r.dataTransfer)!=null&&i.files&&r.dataTransfer.files.length>0&&a(b,E(r.dataTransfer.files[0]))}var j=Fe();xe(r=>{$e.title="Upload Image | Gordon Admin"});var le=d(j);be(le,{children:(r,i)=>{var H=qe(),J=x(H);ye(J,{children:(B,de)=>{var p=je(),C=d(p);Pe(C,{children:(_,O)=>{v();var f=T("Upload Container Image");t(_,f)},$$slots:{default:!0}});var z=c(C,2);W(z,{variant:"outline",size:"sm",onclick:()=>X("/admin/images"),children:(_,O)=>{var f=ke(),D=x(f);Le(D,{class:"mr-2 h-4 w-4"}),v(),t(_,f)},$$slots:{default:!0}}),n(p),t(B,p)},$$slots:{default:!0}});var ie=c(J,2);Ce(ie,{children:(B,de)=>{var p=Se(),C=x(p);{var z=e=>{Y(e,{variant:"default",class:"bg-green-100 text-green-800 mb-4",children:(s,o)=>{Z(s,{children:(w,q)=>{v();var $=T("Image uploaded successfully! Redirecting to images page...");t(w,$)},$$slots:{default:!0}})},$$slots:{default:!0}})};k(C,e=>{l(L)&&e(z)})}var _=c(C,2);{var O=e=>{Y(e,{variant:"destructive",class:"mb-4",children:(s,o)=>{Z(s,{children:(w,q)=>{v();var $=T();G(()=>V($,l(y))),t(w,$)},$$slots:{default:!0}})},$$slots:{default:!0}})};k(_,e=>{l(y)&&e(O)})}var f=c(_,2),D=d(f),g=d(D),K=d(g),M=d(K);ee(M,{class:"h-10 w-10 text-muted-foreground"});var S=c(M,6),N=d(S);Ie(N,{for:"file-upload",class:"sr-only",children:(e,s)=>{v();var o=T("Choose a file");t(e,o)},$$slots:{default:!0}});var ne=c(N,2);Ue(ne,{id:"file-upload",name:"file",type:"file",accept:".tar",onchange:re,class:"cursor-pointer"}),n(S);var fe=c(S,2);{var ce=e=>{var s=Be(),o=d(s);n(s),G(()=>V(o,`Selected: ${l(b).name??""}`)),t(e,s)};k(fe,e=>{l(b)&&e(ce)})}n(K),n(g),n(D);var Q=c(D,2),me=d(Q);const ve=he(()=>!l(b)||l(u));W(me,{type:"submit",variant:"default",get disabled(){return l(ve)},children:(e,s)=>{var o=ue(),w=x(o);{var q=h=>{var A=ze(),F=x(A);Te(F,{class:"mr-2 h-4 w-4 animate-spin"}),v(),t(h,A)},$=h=>{var A=Oe(),F=x(A);ee(F,{class:"mr-2 h-4 w-4"}),v(),t(h,A)};k(w,h=>{l(u)?h(q):h($,!1)})}t(e,o)},$$slots:{default:!0}}),n(Q),n(f),De(f,(e,s)=>{var o;return(o=we)==null?void 0:o(e,s)},()=>()=>(a(u,!0),a(y,null),a(L,!1),({result:e})=>{a(u,!1)})),G(()=>Ae(g,1,`border-2 border-dashed rounded-lg p-8 text-center transition-colors border-primary=${l(P)??""} bg-primary/5=${l(P)??""}`)),R("dragover",g,te),R("dragleave",g,se),R("drop",g,oe),t(B,p)},$$slots:{default:!0}}),t(r,H)},$$slots:{default:!0}}),n(j),t(ae,j),ge()}export{Ye as component};
